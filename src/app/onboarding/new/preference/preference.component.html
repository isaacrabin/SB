<ion-header class="ion-no-border" mode="ios">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="container">

<div >
  <div style="padding-left:20px; padding-top:10px;" >
    <h4 class="browse" style="width: 80%;">Provide your
        <span style="color: #0033aa;"><strong>Preferences </strong>
        </span> information & <span style="color: #0033aa;"><strong>Next of Kin </strong>
        </span>details
    </h4>
  </div>

  <form  [formGroup]="dataForm" style="padding-left: 20px; padding-right: 20px;" (ngSubmit)="submitPreferenceData()">
    <div>
      <ion-item lines="none">
        <ion-label position="stacked" class="labels" style="transform: translateY(30%) scale(0.75) !important; font-size: 20px !important;">Country of Residence <span class="uk-text-danger" >*</span>
        </ion-label>
        <ionic-selectable
          formControlName="residence"
          [items]="countries"
          itemValueField="countryCode"
          [isEnabled]="true"
          itemTextField="countryName"
          [canSearch]="true"
          (onChange)="portChange($event)">
        </ionic-selectable>
      </ion-item>
    </div>

    <div>
      <ion-item lines="none">
          <ion-label position="stacked" class="labels" style="transform: translateY(30%) scale(0.75) !important; font-size: 20px !important;">Town <span class="uk-text-danger" >*</span>
          </ion-label>
          <ion-input name="text" maxlength="35" type="text" formControlName="town" label="" placeholder="e.g. Nairobi">
          </ion-input>
      </ion-item>
      <div class="validation-error uk-text-danger">
          <small class="error-message" *ngIf="f['town'].hasError('pattern') && f['town']dirty">
              <ion-icon name="information-circle-outline"></ion-icon>ID must be a valid ID number
              address
          </small>
          <small class="error-message"
              *ngIf="f['town'].hasError('required') && f['town'].dirty">
              <ion-icon name="information-circle-outline"></ion-icon>ID number is required
          </small>
      </div>
  </div>

 <div>
  <ion-item lines="none">
    <ion-label position="stacked" class="labels" style="transform: translateY(30%) scale(0.75) !important; font-size: 20px !important;">ID Number <span class="uk-text-danger" >*</span>
    </ion-label>
    <ion-input label="" formControlName="street" placeholder=""></ion-input>
  </ion-item>
  <div class="validation-error uk-text-danger">
    <small class="error-message" *ngIf="f['street'].hasError('pattern') && f['street']dirty">
        <ion-icon name="information-circle-outline"></ion-icon>Street is required
    </small>
  </div>
 </div>

  <div>
    <ion-item lines="none">
      <ion-label position="stacked" class="labels" style="transform: translateY(30%) scale(0.75) !important; font-size: 20px !important;">Building <span class="uk-text-danger" >*</span>
      </ion-label>
       <ion-input type="text" formControlName="building" label="" [class.invalid]="!dataForm.controls['building'].valid && (dataForm.controls['building'].dirty)"> </ion-input>
    </ion-item>
    <div class="validation-error uk-text-danger">
      <small class="error-message" *ngIf="f['street'].hasError('pattern') && f['street']dirty">
          <ion-icon name="information-circle-outline"></ion-icon>Building is required
      </small>
    </div>
  </div>

  <!-- Email Address -->
  <div>
  <ion-item lines="none">
      <ion-label position="stacked" class="labels" style="transform: translateY(30%) scale(0.75) !important; font-size: 20px !important;" >RM Code <span class="uk-text-danger"></span>
      </ion-label>
      <ion-input name="rmCode" maxlength="35" type="text" formControlName="rmCode" label="">
      </ion-input>
  </ion-item>
</div>

<!--If Fatca-->

<div *ngIf="fatca">
  <ion-item-divider class="uk-margin-top">
    <ion-label class="fatca uk-padding-top">
      <strong>FATCA Requirements</strong>
    </ion-label>
  </ion-item-divider>

  <!-- SSN -->
  <div>
    <ion-item lines="none">
      <ion-label position="stacked" class="labels" style="transform: translateY(30%) scale(0.75) !important; font-size: 20px !important;">Social Security Number <span class="uk-text-danger"></span>
      </ion-label>
      <ion-input name="ssn" type="text" maxlength="15" label="" formControlName="usSocialSecurityNumber"
        (ionChange)="formatSSN()"></ion-input>
    </ion-item>
  </div>
  <!-- US Postal Code -->
  <div>
    <ion-item lines="none">
      <ion-label position="stacked" class="labels" style="transform: translateY(30%) scale(0.75) !important; font-size: 20px !important;">USA Postal Code <span class="uk-text-danger"></span>
      </ion-label>
      <ion-input name="postalCode" maxlength="35" type="text" label="" formControlName="usPostalCode"></ion-input>
    </ion-item>
  </div>
  <!-- US Mailing Address -->
  <div>
    <ion-item lines="none">
      <ion-label position="stacked" class="labels" style="transform: translateY(30%) scale(0.75) !important; font-size: 20px !important;">USA Mailing Address <span class="uk-text-danger"></span>
      </ion-label>
      <ion-input name="mailingAddress" maxlength="35" type="text" label="" formControlName="usMailingAddress">
      </ion-input>
    </ion-item>
  </div>
</div>
  <div style="margin-top: 30px;">
    <ion-button [disabled]="loader.loading || dataForm.invalid" mode="ios" type="submit"
    expand="block"
    fill="solid"
    shape="round">
    {{ loader.loading ? '' : 'Continue'}}
    <ion-spinner *ngIf="loader.loading" name="dots" color="light"></ion-spinner>
  </ion-button>
  </div>
  </form>
</div>

</ion-content>
